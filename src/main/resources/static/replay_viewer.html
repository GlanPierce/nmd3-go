<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>录像回放 - 忍者棋局</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/game.css">
</head>

<body>
    <div id="app-root" style="display: flex; justify-content: center; align-items: flex-start; padding: 20px;">

        <div class="game-container" style="display: block; margin-top: 0;">
            <header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">录像回放</h2>
                <a href="index.html" class="btn" style="text-decoration: none; color: #007bff;">返回大厅</a>
            </header>

            <div class="controls" style="justify-content: center; margin-bottom: 10px;">
                <p><strong>游戏ID:</strong> <span id="game-id">...</span></p>
            </div>

            <div id="game-info">
                <div id="status-message" style="background: #f8f9fa; color: #333;">准备就绪</div>
                <div class="player-stats">
                    <div class="stat p1">
                        <strong>P1: <span id="p1-name">...</span></strong>
                        <span>得分: <span id="p1-score">0</span></span>
                    </div>
                    <div class="stat p2">
                        <strong>P2: <span id="p2-name">...</span></strong>
                        <span>得分: <span id="p2-score">0</span></span>
                    </div>
                </div>
            </div>

            <div id="board" class="board-grid"></div>

            <div class="controls-bar"
                style="display: flex; justify-content: center; gap: 10px; margin-top: 20px; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                <button id="btn-first" title="第一步">|&lt;</button>
                <button id="btn-prev" title="上一步">&lt;</button>
                <button id="btn-play" style="min-width: 80px;">播放</button>
                <button id="btn-next" title="下一步">&gt;</button>
                <button id="btn-last" title="最后一步">&gt;|</button>
            </div>

            <div style="text-align: center; margin-top: 15px;">
                <span id="move-info" style="font-weight: bold; margin-right: 15px;">步数: 0 / 0</span>
                <button id="btn-collect"
                    style="padding: 5px 10px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">收藏此局</button>
            </div>
        </div>

    </div>

    <script src="js/managers/replay-manager.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const gameId = urlParams.get('id');
            if (gameId) {
                ReplaySystem.loadReplay(gameId);
            } else {
                alert('未指定录像ID');
                window.location.href = 'index.html';
            }
        });
    </script>
</body>

</html>